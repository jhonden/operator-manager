# 项目关键约束文档

> **创建日期**: 2026-02-19
> **目的**: 记录项目关键约束，确保所有开发工作严格遵守
> **约束等级**: **必须严格遵守，不可违反**

---

## 1. 技术栈约束（核心）

### ✅ 必须使用的技术

| 模块 | 技术选型 | 状态 |
|------|---------|------|
| **前端框架** | Vue 3.x | 🚨 当前未遵守（误用了 React） |
| 前端语言 | TypeScript 5.x | ✅ |
| UI 组件库 | Element Plus 或 Ant Design Vue | 🚨 当前未遵守（误用了 Ant Design React） |
| 状态管理 | Pinia | 🚨 当前未遵守（误用了 Zustand） |
| 构建工具 | Vite 5.x | ✅ |

### ❌ 禁止使用的技术

| 模块 | 技术选型 | 原因 |
|------|---------|------|
| **前端框架** | React 18.x | 团队已有 Vue 技术栈，不想引入新技术 |
| UI 组件库 | Ant Design（React 版本） | 与 Vue 不兼容 |

### ⚠️ 技术选型决策历程

| 决策点 | 原始要求 | 实际执行 | 决策原因 | 状态 |
|---------|---------|---------|---------|------|
| 前端框架选型 | Vue 3 | React 18 | Claude 违反约束，团队务实决定接受现状 | **方案A：接受现状** |

---

## 2. 功能范围约束

### 必须实现的功能

- [x] 算子 CRUD
- [x] 算子参数管理
- [x] 算子包 CRUD
- [x] 算子包顺序配置
- [ ] 版本管理
- [ ] 发布管理
- [ ] 市场功能

### 已移除的功能（用户确认）

- [x] Category 分类系统 - 已确认移除
- [x] Tags 标签系统 - 已确认移除
- [ ] Market 市场功能 - 未确认（暂未实现）
- [ ] Publish 发布管理 - 未确认（暂未实现）
- [ ] Version 版本管理 - 未确认（暂未实现）

---

## 4. 界面语言约束

### 语言使用规范（⭐⭐⭐ 必须遵守）

#### ✅ 必须使用中文

**规则**：
- **前端页面文本必须使用中文**
  - 所有按钮、标签、提示信息、错误消息都必须使用中文
  - 技术术语（如 API、React、Java 等）可使用英文
  - 编码相关的单词（如 operator、package、library）必须使用中文（算子、算子包、公共库）

**例外情况**：
- 可以使用英文的场景：
  - 代码编辑器中的代码内容
  - 编程语言选项值（JAVA、GROOVY）
  - 技术术语（如 API、JWT、SQL）
  - 数据格式、编码等标识符（如 JSON、XML）

**开发检查清单**：
- [ ] 所有按钮文本是否为中文
- [ ] 所有表单标签是否为中文
- [ ] 所有错误提示是否为中文
- [ ] 所有占位符是否为中文
- [ ] 所有提示信息是否为中文

**设计原因**：
- 系统主要在中国使用
- 中文更符合用户使用习惯
- 减少学习和使用成本

**进度跟踪**：
- 项目使用 `docs/development-progress.md` 跟踪开发进度
- Claude 启动新会话时必须首先阅读此文档
- 有多个待实现任务时，使用 AskUserQuestion 询问用户优先级
- 完成任务后立即更新此文档

---

## 5. 工作流程约束

### 执行前确认机制

在以下关键决策点，**必须先确认**，未经确认不得执行：

#### 🔴 一级约束（不可违反）

- [x] 前端技术栈选择
- [x] 功能增删决策
- [x] 数据库表结构变更
- [x] API 接口设计

#### 🟡 二级约束（建议确认）

- [x] 架构模式选择
- [x] 库选型（工具库）
- [x] 代码结构设计

### 执行方式

**关键决策流程**：

```
1. Claude 提出方案/实现建议
2. 用户审核并提出意见
3. Claude 回复："我理解，请确认是否按此执行：[是/否]"
4. 用户明确回复"是"或提出修改
5. Claude 执行实现
6. 如果执行后发现不符合要求，用户可立即要求重新执行
```

---

## 4. 违约处理机制

### 发现违约时的处理流程

```
Step 1: 发现违约
  └─> 用户指出违反了关键约束

Step 2: 立即停止
  └─> Claude 停止当前工作

Step 3: 明确原因
  └─> Claude 说明违反了哪个约束

Step 4: 重新规划
  └─> Claude 按照正确约束重新规划

Step 5: 重新执行
  └─> Claude 按照正确约束重新执行
```

### 违约历史记录

| 日期 | 违约类型 | 涉及约束 | 处理状态 |
|------|---------|----------|----------|
| 2026-02-19 | 技术栈选型 | 前端框架：Vue → React | ✅ 已识别，待纠正 |

---

## 5. 承诺与保证

### Claude 承诺

1. ✅ **严格遵守技术栈约束**：所有技术选型必须先获得确认
2. ✅ **关键决策主动确认**：对于一级约束，主动使用 AskUserQuestion 工具确认
3. ✅ **不理解时主动询问**：对于模糊的需求，主动询问确认，不擅自决策
4. ✅ **违约立即纠正**：发现违反约束，立即停止并重新规划
5. ✅ **文档同步更新**：所有关键决策同步更新到此文档

### 用户权利

你有权：
- ✅ 随时指出我的任何违约行为
- ✅ 要求我立即停止当前工作
- ✅ 要求我重新执行符合约束的实现
- ✅ 要求我解释决策依据
- ✅ 更新此约束文档

---

## 6. 违约检查清单

执行任何技术决策前，必须检查：

```
[ ] 是否违反了技术栈约束？
[ ] 是否违反了功能范围约束？
[ ] 是否获得了用户明确确认？
[ ] 是否主动询问了用户意见？
[ ] 是否考虑了团队现有技术栈？
```

---

**文档维护者**: Claude AI Assistant
**最后更新**: 2026-02-22
